var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(s,o){function r(t){try{h(n.next(t))}catch(e){o(e)}}function a(t){try{h(n["throw"](t))}catch(e){o(e)}}function h(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(r,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(r=h.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){h.label=i[1];break}if(6===i[0]&&h.label<r[1]){h.label=r[1],r=i;break}if(r&&h.label<r[2]){h.label=r[2],h.ops.push(i);break}r[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],o=0}finally{s=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,o,r,a,h={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},DragAnyMakeRuleListCommonScene=function(t){function e(){var e=t.call(this)||this;return e.targetDataMap={},e.isNewItem=!1,e.ImgList=[],e.rectCanSetList=[],e.numMax=1,e.curMoveItemIndex=-2,e.countImgList=[],e.curNumImgList=[],e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent(),this.refreshForListTouchEnd()},e.prototype.onDestroy=function(){this.destoryEvent(),this.destoryData()},e.prototype.execMessage=function(t){if(t.reset)this.resetData(),this.refreshForListTouchEnd();else if(t.touchBegin){var e=t.touchBegin.isNewItem,i=t.touchBegin.curIndexStr,n=parseInt(t.touchBegin.targetX),s=parseInt(t.touchBegin.targetY);this.revStartHandle(e,i,n,s)}else if(t.touchMove){var n=parseInt(t.touchMove.targetX),s=parseInt(t.touchMove.targetY);this.revMoveHandle(n,s)}else if(t.touchEndLayer){var o=t.touchEndLayer.isCancelStr,r=t.touchEndLayer.isNewItemStr,n=parseInt(t.touchEndLayer.targetX),s=parseInt(t.touchEndLayer.targetY),a=parseInt(t.touchEndLayer.deleteIndex),h=parseInt(t.touchEndLayer.targetListIndex);this.revEndHandle(o,r,n,s,a,h)}},e.prototype.initData=function(){if(this.targetList=[],this.targetDataMap={},this.curNumImgList=[],this.countImgList.length<=0)for(var t=0;t<this.ImgList.length;t++)this.countImgList[t]=9999,this.curNumImgList[t]=0;else for(var t=0;t<this.ImgList.length;t++)this.curNumImgList[t]=0},e.prototype.initAddEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}this.btnReset&&this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.touchBeginOriginalEvent=function(t){this.errorEndEventFunc(),t.stopPropagation();var e=this.ImgList.indexOf(t.target);if(e>=-1){this.curMoveItemIndex=e,this.isNewItem=!0,this.curMoveItemObj=this.newObjForTouchBegin(t.target,t.stageX,t.stageY);var i=new Object;i.isNewItem="1",i.curIndexStr=e.toString(),i.targetX=t.stageX.toString(),i.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin",i),this.refreshToIsHideTouchBegin(e)}},e.prototype.newObjForTouchBegin=function(t,e,i){var n=this.group.globalToLocal(e,i),s=t.source,o=new eui.Image(s);return o.anchorOffsetX=t.anchorOffsetX,o.anchorOffsetY=t.anchorOffsetY,o.rotation=t.rotation,o.x=n.x,o.y=n.y,this.group.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),o},e.prototype.deleteObj=function(t){t&&(t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),egret.Tween.removeTweens(t),this.group.removeChild(t))},e.prototype.touchBeginMakedItemEvent=function(t){if(this.curMoveItemIndex>=-1&&this.curMoveItemObj){if(this.curMoveItemObj==t.currentTarget)return;this.errorEndEventFunc()}t.stopPropagation();var e=-1;for(var i in this.targetList){var n=this.targetList[i];n==t.currentTarget&&(e=parseInt(i))}if(e>=-1){var s=this.group.numChildren;this.group.setChildIndex(t.target,s-1),this.curMoveItemIndex=e,this.isNewItem=!1,this.curMoveItemObj=t.target;var n=new Object;n.isNewItem="0",n.curIndexStr=e.toString(),n.targetX=t.stageX.toString(),n.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin",n)}},e.prototype.touchMoveLayerEvent=function(t){if(this.curMoveItemObj){var e=this.curMoveItemObj;if(e){var i=t.stageX,n=t.stageY,s=this.globalToLocal(i,n);e.x=s.x,e.y=s.y;var o=new Object;o.targetX=e.x.toString(),o.targetY=e.y.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchMove",o)}}},e.prototype.touchBeginLayerEvent=function(t){this.errorEndEventFunc()},e.prototype.touchEndLayerEvent=function(t){var e=0,i=0,n=0,s=0,o=-2,r=-1;if(this.curMoveItemIndex>=-1&&this.curMoveItemObj){var a=(this.curMoveItemObj,t.stageX),h=t.stageY;if(n=t.stageX,s=t.stageY,this.curMoveItemObj.x=a,this.curMoveItemObj.y=h,r=this.getRectIndexCanSet(a,h),this.isCanSetToRect(this.curMoveItemIndex,r,this.curMoveItemObj,this.isNewItem)||(r=-1),-1>=r)if(e=1,this.isNewItem)i=1,this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else{i=0;var c=0;for(var g in this.targetList){var u=this.targetList[g];u==this.curMoveItemObj&&(c=parseInt(g))}o=c,this.targetList.splice(c,1),this.removeToTarget(this.curMoveItemObj),this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null}else e=0,this.isNewItem?(i=1,this.targetList.push(this.curMoveItemObj),this.pushToTarget(this.curMoveItemObj,this.curMoveItemIndex,r),this.curMoveItemObj=null):(i=0,this.refreshToTarget(this.curMoveItemObj,r),this.curMoveItemObj=null)}var l=new Object;l.isCancelStr=e.toString(),l.isNewItemStr=i.toString(),l.targetX=n.toString(),l.targetY=s.toString(),l.deleteIndex=o.toString(),l.targetListIndex=r.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchEndLayer",l),this.refreshForListTouchEnd()},e.prototype.resetData=function(){if(this.targetList&&this.targetList.length>0){for(var t=0,e=this.targetList;t<e.length;t++){var i=e[t];this.deleteObj(i)}this.targetList=[]}this.targetDataMap={};for(var n=0;n<this.curNumImgList.length;n++)this.curNumImgList[n]=0},e.prototype.touchTapEvent=function(t){this.resetData(),this.refreshForListTouchEnd(),CommunicationManager.getInstance().makePostMessage("onFileMessage","reset",1)},e.prototype.destoryData=function(){delete this.ImgList,this.ImgList=[],delete this.rectCanSetList,this.rectCanSetList=[],delete this.targetDataMap,this.targetDataMap={},delete this.countImgList,this.countImgList=[],delete this.curNumImgList,this.curNumImgList=[],this.resetData()},e.prototype.destoryEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}this.btnReset&&this.btnReset.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.revStartHandle=function(t,e,i,n){if(this.curMoveItemIndex=-2,"1"==t){var s=parseInt(e),o=this.ImgList[s];o?(this.curMoveItemObj=this.newObjForTouchBegin(o,i,n),this.isNewItem=!0,this.curMoveItemIndex=parseInt(e)):Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 1"),this.refreshToIsHideTouchBegin(s)}else{var s=parseInt(e),o=this.targetList[s];if(o){this.isNewItem=!1;var r=this.group.numChildren;this.group.setChildIndex(o,r-1),this.curMoveItemObj=o}else Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 0")}},e.prototype.revMoveHandle=function(t,e){var i=this.curMoveItemObj;if(i){var n=this.globalToLocal(t,e);i.x=n.x,i.y=n.y}},e.prototype.revEndHandle=function(t,e,i,n,s,o){if("1"==t)if("1"==e)this.curMoveItemObj&&this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else if(s>=-1){var r=s;this.targetList.splice(r,1),this.curMoveItemObj&&(this.deleteObj(this.curMoveItemObj),this.removeToTarget(this.curMoveItemObj)),this.curMoveItemObj=null}else Log.trace("DragAnyMakeForMaxAndCancleScene","revEndHandle error  index to obj not find ");else Log.trace("不是取消"),Log.trace("curMoveItemObj is ",this.curMoveItemObj),Log.trace("targetList is ",this.targetList),Log.trace("targetDataMap is ",this.targetDataMap),"1"==e?(this.curMoveItemObj&&(this.targetList.push(this.curMoveItemObj),o>-1&&this.pushToTarget(this.curMoveItemObj,this.curMoveItemIndex,o)),this.curMoveItemIndex=-2,this.curMoveItemObj=null):(this.refreshToTarget(this.curMoveItemObj,o),this.curMoveItemObj=null);this.refreshForListTouchEnd()},e.prototype.getRectIndexCanSet=function(t,e){for(var i in this.rectCanSetList){var n=this.rectCanSetList[i];if(n.hitTestPoint(t,e))return parseInt(i)}return-1},e.prototype.isCanSetToRect=function(t,e,i,n){if(n)return this.isCanSetToRectForReal(t,e,i,n);var s=this.getDataFromTargetDataMap(i);return s?this.isCanSetToRectForReal(s.index,e,i,n):!0},e.prototype.isCanSetToRectForReal=function(t,e,i,n){return!0},e.prototype.isCanSetToRectForRectMax=function(t,e,i){if(this.targetDataMap[t]&&this.targetDataMap[t].length>0){if(this.targetDataMap[t].length<i)return!0;if(this.targetDataMap[t].length==i){for(var n=0,s=this.targetDataMap[t];n<s.length;n++){var o=s[n];if(o.obj==e)return!0}return!1}return!1}return!0},e.prototype.pushToTarget=function(t,e,i){var n=null;if(this.targetDataMap[i]){n=this.targetDataMap[i];var s={obj:t,index:e};n.push(s)}else n=[{obj:t,index:e}],this.targetDataMap[i]=n;this.curNumImgList[e]++},e.prototype.removeToTarget=function(t){for(var e in this.targetDataMap){var i=this.targetDataMap[e];if(i)for(var n in i){var s=i[parseInt(n)];if(s&&s.obj==t)return i.splice(n,1),void this.curNumImgList[s.index]--}}},e.prototype.refreshToTarget=function(t,e){for(var i in this.targetDataMap){var n=this.targetDataMap[i];if(n)for(var s in n){var o=n[parseInt(s)];if(o&&o.obj==t)return this.removeToTarget(t),void this.pushToTarget(o.obj,o.index,e)}}},e.prototype.getDataFromTargetDataMap=function(t){for(var e in this.targetDataMap){var i=this.targetDataMap[e];if(i)for(var n in i){var s=i[parseInt(n)];if(s&&s.obj==t)return s}}return null},e.prototype.refreshToIsHideTouchBegin=function(t){for(var e in this.ImgList){var i=parseInt(e),n=this.ImgList[i],s=0;i==t&&(s=1),n&&(this.curNumImgList[i]+s<this.countImgList[i]?n.visible=!0:n.visible=!1)}},e.prototype.refreshForListTouchEnd=function(){for(var t in this.ImgList){var e=parseInt(t),i=this.ImgList[e];i&&(this.curNumImgList[e]<this.countImgList[e]?i.visible=!0:i.visible=!1)}},e.prototype.errorEndEventFunc=function(){if(this.curMoveItemIndex>=-1&&this.curMoveItemObj){var t=new egret.TouchEvent(egret.TouchEvent.TOUCH_END,null,null,999999,999999);this.touchEndLayerEvent(t)}},e}(UIObject);__reflect(DragAnyMakeRuleListCommonScene.prototype,"DragAnyMakeRuleListCommonScene");var TweenToCenterScene=function(t){function e(){var e=t.call(this)||this;return e.ImgLeftList=[],e.ImgRightList=[],e.ImgHideList=[],e.ImgShowList=[],e.numTweenTime=1e3,e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){this.numCurTween=0,this.posLeftList=[];for(var t in this.ImgLeftList){var e=this.ImgLeftList[t];e&&(this.posLeftList[parseInt(t)]=new egret.Point(e.x,e.y))}this.posRightList=[];for(var t in this.ImgRightList){var e=this.ImgRightList[t];e&&(this.posRightList[parseInt(t)]=new egret.Point(e.x,e.y))}this.resetAllTweenAndPos()},e.prototype.initAddEvent=function(){this.btnMerge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this)},e.prototype.touchTapEvent=function(t){this.startTweenMerge(),CommunicationManager.getInstance().makePostMessage("onFileMessage","startTweenMerge",1)},e.prototype.startTweenMerge=function(){var t=this;this.numCurTween=0,this.resetAllTweenAndPos();for(var e=function(){t.removeNumCurTween(),t.numCurTween<=0&&t.endTweenMerge()},i=function(i,n){t.addNumCurTween();var s=i.x+n.x,o=i.y+n.y;egret.Tween.get(i).to({x:s,y:o},t.numTweenTime).call(e)},n=0,s=this.ImgLeftList;n<s.length;n++){var o=s[n];i(o,this.posLeftOff)}for(var r=0,a=this.ImgRightList;r<a.length;r++){var o=a[r];i(o,this.posRightOff)}},e.prototype.resetAllTweenAndPos=function(){for(var t in this.ImgLeftList){var e=this.ImgLeftList[t],i=this.posLeftList[t];e&&i&&(e.x=i.x,e.y=i.y,egret.Tween.removeTweens(e))}for(var t in this.ImgRightList){var e=this.ImgRightList[t],i=this.posRightList[t];e&&i&&(e.x=i.x,e.y=i.y,egret.Tween.removeTweens(e))}for(var n=0,s=this.ImgShowList;n<s.length;n++){var e=s[n];e.visible=!1}for(var o=0,r=this.ImgHideList;o<r.length;o++){var e=r[o];e.visible=!0}},e.prototype.addNumCurTween=function(){this.numCurTween++},e.prototype.removeNumCurTween=function(){this.numCurTween--},e.prototype.endTweenMerge=function(){for(var t=0,e=this.ImgHideList;t<e.length;t++){var i=e[t];i.visible=!1}for(var n=0,s=this.ImgShowList;n<s.length;n++){var i=s[n];i.visible=!0}},e.prototype.onDestroy=function(){this.destoryEvent(),this.resetData(),this.destoryData()},e.prototype.resetData=function(){this.resetAllTweenAndPos()},e.prototype.destoryData=function(){delete this.ImgLeftList,this.ImgLeftList=[],delete this.posLeftList,this.posLeftList=[],delete this.ImgRightList,this.ImgRightList=[],delete this.posRightList,this.posRightList=[],delete this.ImgHideList,this.ImgHideList=[],delete this.ImgShowList,this.ImgShowList=[]},e.prototype.destoryEvent=function(){this.btnMerge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this)},e.prototype.execMessage=function(t){t.startTweenMerge&&this.startTweenMerge()},e}(UIObject);__reflect(TweenToCenterScene.prototype,"TweenToCenterScene");var ClickItemForShowPhaseScene=function(t){function e(){var e=t.call(this)||this;return e.clickItemArr=new Array,e.showPhaseArr=new Array,e.showIndexArr=new Array,e}return __extends(e,t),e.prototype.onDestroy=function(){for(var t=0;t<this.clickItemArr.length;t++)this.clickItemArr[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doShowNextPhaseItemHandle,this);for(var t=0;t<this.showPhaseArr.length;t++){for(var e=0;e<this.showPhaseArr[t].length;e++)this.showPhaseArr[t][e].visible=!1;this.showIndexArr[t]=0}this.backImg&&this.backImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBackInitHandle,this)},e.prototype.initScene=function(){if(!(this.clickItemArr.length<=0||this.showPhaseArr.length<=0)){for(var t=0;t<this.clickItemArr.length;t++)this.clickItemArr[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.doShowNextPhaseItemHandle,this),this.clickItemArr[t].name=String(t+1);for(var t=0;t<this.showPhaseArr.length;t++){for(var e=0;e<this.showPhaseArr[t].length;e++)this.showPhaseArr[t][e].name=String(t+1)+"_"+String(e),this.showPhaseArr[t][e].visible=!1;var i=0;this.showIndexArr.push(i)}this.backImg&&this.backImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBackInitHandle,this)}},e.prototype.doShowNextPhaseItemHandle=function(t){var e=t.currentTarget.name;if(!(this.showIndexArr[Number(e)-1]>this.showPhaseArr[Number(e)-1].length-1)){this.showPhaseArr[Number(e)-1][this.showIndexArr[Number(e)-1]].visible=!0,this.showIndexArr[Number(e)-1]++;var i=new Object;i.name=e,i.phase=this.showIndexArr[Number(e)-1]-1,CommunicationManager.getInstance().makePostMessage("onFileMessage","showPhase",i)}},e.prototype.doBackInitHandle=function(){this.initScene(),CommunicationManager.getInstance().makePostMessage("onFileMessage","backInit",1)},e.prototype.execMessage=function(t){if(t.showPhase){var e=Number(t.showPhase.name),i=Number(t.showPhase.phase);this.showPhaseArr[e-1][i].visible=!0,this.showIndexArr[e-1]=i}else t.backInit&&this.initScene()},e}(UIObject);__reflect(ClickItemForShowPhaseScene.prototype,"ClickItemForShowPhaseScene");var ClickOneChooseScene=function(t){function e(){var e=t.call(this)||this;return e.ImgSelectedList=[],e.rectListSelect=[],e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){for(var t in this.ImgSelectedList){var e=this.ImgSelectedList[parseInt(t)];e&&(e.visible=!1)}},e.prototype.initAddEvent=function(){if(this.rectListSelect)for(var t=0,e=this.rectListSelect;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapChooseRectEvent,this)}},e.prototype.resetData=function(){for(var t in this.ImgSelectedList){var e=this.ImgSelectedList[parseInt(t)];e&&(e.visible=!1)}},e.prototype.touchTapChooseRectEvent=function(t){var e=this.rectListSelect.indexOf(t.currentTarget);if(e>-1){for(var i in this.ImgSelectedList){var n=this.ImgSelectedList[parseInt(i)];n&&(parseInt(i)==e?n.visible=!0:n.visible=!1)}var s=new Object;s.chooseIndex=e.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","choose",s)}else Log.trace("DragAnyOptionalChooseBtn"," touchTapChooseRectEvent error  index error ")},e.prototype.onDestroy=function(){this.destroyEvent(),this.destroyData()},e.prototype.destroyData=function(){this.resetData(),delete this.ImgSelectedList,this.ImgSelectedList=[],delete this.rectListSelect,this.rectListSelect=[]},e.prototype.destroyEvent=function(){if(this.rectListSelect)for(var t=0,e=this.rectListSelect;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapChooseRectEvent,this)}},e.prototype.execMessage=function(t){if(t.choose){var e=parseInt(t.choose.chooseIndex);this.revChooseHandle(e)}},e.prototype.revChooseHandle=function(t){if(t>-1)for(var e in this.ImgSelectedList){var i=this.ImgSelectedList[parseInt(e)];i&&(parseInt(e)==t?i.visible=!0:i.visible=!1)}},e}(UIObject);__reflect(ClickOneChooseScene.prototype,"ClickOneChooseScene");var ClockTouchScene=function(t){function e(){var e=t.call(this)||this;return e.clockImgArr=[],e._initPosArr=[],e}return __extends(e,t),e.prototype.onAdd=function(){this.initScene(),this.initAddEvent()},e.prototype.onDestroy=function(){for(var t=0;t<this.clockImgArr.length;t++)this.clockImgArr[t].hasEventListener(egret.TouchEvent.TOUCH_BEGIN)&&this.clockImgArr[t].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.doTouchBeginHandle,this);this.clockImgArr=[]},e.prototype.initScene=function(){if(this._initPosArr.length<=0)for(var t=0;t<this.clockImgArr.length;t++)this._initPosArr.push(this.clockImgArr[t].x),this._initPosArr.push(this.clockImgArr[t].y);else for(var t=0;t<this.clockImgArr.length;t++)this.clockImgArr[t].x=this._initPosArr[2*t],this.clockImgArr[t].y=this._initPosArr[2*t+1];for(var t=0;t<this.clockImgArr.length;t++)this.clockImgArr[t].pixelHitTest=!0,this.clockImgArr[t].name=String(t)},e.prototype.initAddEvent=function(){for(var t=0;t<this.clockImgArr.length;t++)this.clockImgArr[t].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.doTouchBeginHandle,this)},e.prototype.doTouchBeginHandle=function(t){this._touchImg=t.currentTarget,this._touchImg&&(this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.doTouchMoveHandle,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.doTouchEndHandle,this))},e.prototype.doTouchMoveHandle=function(t){if(!this._touchImg)return void this.stop();var e=t.stageX-this._touchImg.x,i=t.stageY-this._touchImg.y;this._touchImg.rotation=Math.atan2(i,e)/Math.PI*180+90;var n=new Object;n.itemName=this._touchImg.name,n.itemRotation=this._touchImg.rotation,CommunicationManager.getInstance().makePostMessage("onFileMessage","moveIng",n)},e.prototype.stop=function(){this.stage.hasEventListener(egret.TouchEvent.TOUCH_MOVE)&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.doTouchMoveHandle,this),this._touchImg.hasEventListener(egret.TouchEvent.TOUCH_BEGIN)&&this._touchImg.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.doTouchBeginHandle,this),this.stage.hasEventListener(egret.TouchEvent.TOUCH_END)&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.doTouchEndHandle,this)},e.prototype.doTouchEndHandle=function(t){if(this._touchImg){this.stage.hasEventListener(egret.TouchEvent.TOUCH_MOVE)&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.doTouchMoveHandle,this),this.stage.hasEventListener(egret.TouchEvent.TOUCH_END)&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.doTouchEndHandle,this);var e=new Object;e.itemName=this._touchImg.name,e.itemRotation=this._touchImg.rotation,CommunicationManager.getInstance().makePostMessage("onFileMessage","moveEnd",e)}},e.prototype.execMessage=function(t){if(t.moveIng){var e=t.moveIng.itemName,i=Number(t.moveIng.itemRotation);this.revMoveingHandle(e,i)}else if(t.moveEnd){var n=t.moveEnd.itemName,i=Number(t.moveEnd.itemRotation);this.revMoveEndHandle(n,i)}},e.prototype.revMoveingHandle=function(t,e){this._touchImg=this.group.getChildByName(t),this._touchImg&&(this._touchImg.rotation=e)},e.prototype.revMoveEndHandle=function(t,e){this._touchImg=this.group.getChildByName(t),this._touchImg&&(this._touchImg.rotation=e)},e}(UIObject);__reflect(ClockTouchScene.prototype,"ClockTouchScene");var DragAnyMakeForMaxAndCancleScene=function(t){function e(){var e=t.call(this)||this;return e.isNewItem=!1,e.ImgList=[],e.numMax=1,e.curMoveItemIndex=-2,e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){this.targetList=[]},e.prototype.initAddEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.touchBeginOriginalEvent=function(t){var e=this.ImgList.indexOf(t.target);if(e>=-1){this.curMoveItemIndex=e,this.isNewItem=!0,this.curMoveItemObj=this.newObjForTouchBegin(t.target,t.stageX,t.stageY);var i=new Object;i.isNewItem="1",i.curIndexStr=e.toString(),i.targetX=t.stageX.toString(),i.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin",i)}},e.prototype.newObjForTouchBegin=function(t,e,i){var n=this.group.globalToLocal(e,i),s=t.source,o=new eui.Image(s);return o.anchorOffsetX=t.anchorOffsetX,o.anchorOffsetY=t.anchorOffsetY,o.rotation=t.rotation,o.x=n.x,o.y=n.y,this.group.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),o},e.prototype.deleteObj=function(t){t&&(t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),this.group.removeChild(t))},e.prototype.touchBeginMakedItemEvent=function(t){var e=0;for(var i in this.targetList){var n=this.targetList[i];n==t.currentTarget&&(e=parseInt(i))}if(e>=-1){var s=this.group.numChildren;this.group.setChildIndex(t.target,s-1),this.curMoveItemIndex=e,this.isNewItem=!1,this.curMoveItemObj=t.target;var n=new Object;n.isNewItem="0",n.curIndexStr=e.toString(),n.targetX=t.stageX.toString(),n.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin",n)}},e.prototype.touchMoveLayerEvent=function(t){if(this.curMoveItemObj){var e=this.curMoveItemObj;if(e){var i=t.stageX,n=t.stageY,s=this.globalToLocal(i,n);e.x=s.x,e.y=s.y;var o=new Object;o.targetX=e.x.toString(),o.targetY=e.y.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchMove",o)}}},e.prototype.touchEndLayerEvent=function(t){var e=0,i=0,n=0,s=0,o=-2;if(this.curMoveItemIndex>=-1&&this.curMoveItemObj){var r=(this.curMoveItemObj,t.stageX),a=t.stageY;n=t.stageX,s=t.stageY,this.curMoveItemObj.x=r,this.curMoveItemObj.y=a;var h=this.rectCancle.hitTestPoint(r,a);if(h)if(e=1,this.isNewItem)i=1,this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else{i=0;var c=0;for(var g in this.targetList){var u=this.targetList[g];u==this.curMoveItemObj&&(c=parseInt(g))}o=c,this.targetList.splice(c,1),this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null}else e=0,this.isNewItem?(i=1,this.targetList.push(this.curMoveItemObj),this.curMoveItemObj=null):(i=0,this.curMoveItemObj=null)}var l=new Object;l.isCancelStr=e.toString(),l.isNewItemStr=i.toString(),l.targetX=n.toString(),l.targetY=s.toString(),l.deleteIndex=o.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchEndLayer",l)},e.prototype.resetData=function(){if(this.targetList&&this.targetList.length>0){for(var t=0,e=this.targetList;t<e.length;t++){var i=e[t];this.deleteObj(i)}this.targetList=[]}},e.prototype.touchTapEvent=function(t){this.resetData(),CommunicationManager.getInstance().makePostMessage("onFileMessage","reset",1)},e.prototype.onDestroy=function(){this.destoryEvent(),this.destoryData()},e.prototype.destoryData=function(){delete this.ImgList,this.ImgList=[],this.resetData()},e.prototype.destoryEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}this.btnReset.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.execMessage=function(t){if(t.reset)this.resetData();else if(t.touchBegin){var e=t.touchBegin.isNewItem,i=t.touchBegin.curIndexStr,n=parseInt(t.touchBegin.targetX),s=parseInt(t.touchBegin.targetY);this.revStartHandle(e,i,n,s)}else if(t.touchMove){var n=parseInt(t.touchMove.targetX),s=parseInt(t.touchMove.targetY);this.revMoveHandle(n,s)}else if(t.touchEndLayer){var o=t.touchEndLayer.isCancelStr,r=t.touchEndLayer.isNewItemStr,n=parseInt(t.touchEndLayer.targetX),s=parseInt(t.touchEndLayer.targetY),a=parseInt(t.touchEndLayer.deleteIndex);this.revEndHandle(o,r,n,s,a)}},e.prototype.revStartHandle=function(t,e,i,n){if("1"==t){var s=parseInt(e),o=this.ImgList[s];o?this.curMoveItemObj=this.newObjForTouchBegin(o,i,n):Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 1")}else{var s=parseInt(e),o=this.targetList[s];if(o){var r=this.group.numChildren;this.group.setChildIndex(o,r-1),this.curMoveItemObj=o}else Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 0")}},e.prototype.revMoveHandle=function(t,e){var i=this.curMoveItemObj;if(i){var n=this.globalToLocal(t,e);i.x=n.x,i.y=n.y}},e.prototype.revEndHandle=function(t,e,i,n,s){if("1"==t)if("1"==e)this.curMoveItemObj&&this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else if(s>=-1){var o=s;this.targetList.splice(o,1),this.curMoveItemObj&&this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null}else Log.trace("DragAnyMakeForMaxAndCancleScene","revEndHandle error  index to obj not find ");else"1"==e?(this.curMoveItemObj&&this.targetList.push(this.curMoveItemObj),this.curMoveItemObj=null):this.curMoveItemObj=null},e}(UIObject);__reflect(DragAnyMakeForMaxAndCancleScene.prototype,"DragAnyMakeForMaxAndCancleScene");var DragAnyMakeOptionalChooseBtn=function(t){function e(){var e=t.call(this)||this;return e.isNewItem=!1,e.ImgList=[],e.curMoveItemIndex=-2,e.rectListSelect=[],e.imgSelected=null,e.indexTrueAnswer=-1,e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){this.targetList=[],this.imgSelected&&(this.imgSelected.visible=!1)},e.prototype.initSelectData=function(t,e,i){t&&e&&null!=i?(this.rectListSelect=t,this.imgSelected=e,this.indexTrueAnswer=i):Log.trace("DragAnyOptionalChooseBtn","initSelectData error args is null")},e.prototype.initAddEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}if(this.rectListSelect)for(var n=0,s=this.rectListSelect;n<s.length;n++){var i=s[n];i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapChooseRectEvent,this)}this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.touchTapChooseRectEvent=function(t){var e=this.rectListSelect.indexOf(t.currentTarget);if(e>-1){this.imgSelected&&(this.imgSelected.visible=!0,this.imgSelected.x=t.currentTarget.x,this.imgSelected.y=t.currentTarget.y),e==this.indexTrueAnswer?GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:1,movie:"success",movieCount:2}):GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:2,movie:"failed",movieCount:2});var i=new Object;i.chooseIndex=e.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","choose",i)}else Log.trace("DragAnyOptionalChooseBtn"," touchTapChooseRectEvent error  index error ")},e.prototype.touchBeginOriginalEvent=function(t){var e=this.ImgList.indexOf(t.target);if(e>=-1){this.curMoveItemIndex=e,this.isNewItem=!0,this.curMoveItemObj=this.newObjForTouchBegin(t.target,t.stageX,t.stageY);var i=new Object;i.isNewItem="1",i.curIndexStr=e.toString(),i.targetX=t.stageX.toString(),i.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin",i)}},e.prototype.newObjForTouchBegin=function(t,e,i){var n=this.group.globalToLocal(e,i),s=t.source,o=new eui.Image(s);return o.anchorOffsetX=t.anchorOffsetX,o.anchorOffsetY=t.anchorOffsetY,o.rotation=t.rotation,o.x=n.x,o.y=n.y,this.group.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),o},e.prototype.deleteObj=function(t){t&&(t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),this.group.removeChild(t))},e.prototype.touchBeginMakedItemEvent=function(t){var e=0;for(var i in this.targetList){var n=this.targetList[i];n==t.currentTarget&&(e=parseInt(i))}if(e>=-1){var s=this.group.numChildren;this.group.setChildIndex(t.target,s-1),this.curMoveItemIndex=e,this.isNewItem=!1,this.curMoveItemObj=t.target;var n=new Object;n.isNewItem="0",n.curIndexStr=e.toString(),n.targetX=t.stageX.toString(),n.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin",n)}},e.prototype.touchMoveLayerEvent=function(t){if(this.curMoveItemObj){var e=this.curMoveItemObj;if(e){var i=t.stageX,n=t.stageY,s=this.globalToLocal(i,n);e.x=s.x,e.y=s.y;var o=new Object;o.targetX=e.x.toString(),o.targetY=e.y.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchMove",o)}}},e.prototype.touchEndLayerEvent=function(t){var e=0,i=0,n=0,s=0,o=-2;if(this.curMoveItemIndex>=-1&&this.curMoveItemObj){var r=(this.curMoveItemObj,t.stageX),a=t.stageY;n=t.stageX,s=t.stageY,this.curMoveItemObj.x=r,this.curMoveItemObj.y=a;var h=this.rectCancle.hitTestPoint(r,a);if(h)if(e=1,this.isNewItem)i=1,this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else{i=0;var c=0;for(var g in this.targetList){var u=this.targetList[g];
u==this.curMoveItemObj&&(c=parseInt(g))}o=c,this.targetList.splice(c,1),this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null}else e=0,this.isNewItem?(i=1,this.targetList.push(this.curMoveItemObj),this.curMoveItemObj=null):(i=0,this.curMoveItemObj=null)}var l=new Object;l.isCancelStr=e.toString(),l.isNewItemStr=i.toString(),l.targetX=n.toString(),l.targetY=s.toString(),l.deleteIndex=o.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchEndLayer",l)},e.prototype.resetData=function(){if(this.targetList&&this.targetList.length>0){for(var t=0,e=this.targetList;t<e.length;t++){var i=e[t];this.deleteObj(i)}this.targetList=[]}},e.prototype.touchTapEvent=function(t){this.resetData(),CommunicationManager.getInstance().makePostMessage("onFileMessage","reset",1)},e.prototype.onDestroy=function(){this.destoryEvent(),this.destoryData()},e.prototype.destoryData=function(){this.resetData(),delete this.ImgList,this.ImgList=[],delete this.rectListSelect,this.rectListSelect=[],delete this.imgSelected,this.imgSelected=null},e.prototype.destoryEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}if(this.rectListSelect)for(var n=0,s=this.rectListSelect;n<s.length;n++){var i=s[n];i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapChooseRectEvent,this)}this.btnReset.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.execMessage=function(t){if(t.reset)this.resetData();else if(t.choose){var e=parseInt(t.choose.chooseIndex);this.revChooseHandle(e)}else if(t.touchBegin){var i=t.touchBegin.isNewItem,n=t.touchBegin.curIndexStr,s=parseInt(t.touchBegin.targetX),o=parseInt(t.touchBegin.targetY);this.revStartHandle(i,n,s,o)}else if(t.touchMove){var s=parseInt(t.touchMove.targetX),o=parseInt(t.touchMove.targetY);this.revMoveHandle(s,o)}else if(t.touchEndLayer){var r=t.touchEndLayer.isCancelStr,a=t.touchEndLayer.isNewItemStr,s=parseInt(t.touchEndLayer.targetX),o=parseInt(t.touchEndLayer.targetY),h=parseInt(t.touchEndLayer.deleteIndex);this.revEndHandle(r,a,s,o,h)}},e.prototype.revChooseHandle=function(t){if(t>-1){var e=this.rectListSelect[t];this.imgSelected&&e&&(this.imgSelected.visible=!0,this.imgSelected.x=e.x,this.imgSelected.y=e.y),t==this.indexTrueAnswer?GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:1,movie:"success",movieCount:2}):GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:2,movie:"failed",movieCount:2})}},e.prototype.revStartHandle=function(t,e,i,n){if("1"==t){var s=parseInt(e),o=this.ImgList[s];o?this.curMoveItemObj=this.newObjForTouchBegin(o,i,n):Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 1")}else{var s=parseInt(e),o=this.targetList[s];if(o){var r=this.group.numChildren;this.group.setChildIndex(o,r-1),this.curMoveItemObj=o}else Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 0")}},e.prototype.revMoveHandle=function(t,e){var i=this.curMoveItemObj;if(i){var n=this.globalToLocal(t,e);i.x=n.x,i.y=n.y}},e.prototype.revEndHandle=function(t,e,i,n,s){if("1"==t)if("1"==e)this.curMoveItemObj&&this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else if(s>=-1){var o=s;this.targetList.splice(o,1),this.curMoveItemObj&&this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null}else Log.trace("DragAnyMakeForMaxAndCancleScene","revEndHandle error  index to obj not find ");else"1"==e?(this.curMoveItemObj&&this.targetList.push(this.curMoveItemObj),this.curMoveItemObj=null):this.curMoveItemObj=null},e}(UIObject);__reflect(DragAnyMakeOptionalChooseBtn.prototype,"DragAnyMakeOptionalChooseBtn");var ClickHideScene=function(t){function e(){var e=t.call(this)||this;return e.ImgSelectedList=[],e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){for(var t in this.ImgSelectedList){var e=this.ImgSelectedList[parseInt(t)];e&&(e.visible=!0)}},e.prototype.initAddEvent=function(){if(this.ImgSelectedList)for(var t=0,e=this.ImgSelectedList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapImgEvent,this)}this.btnReset&&this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapResetEvent,this)},e.prototype.resetData=function(){for(var t in this.ImgSelectedList){var e=this.ImgSelectedList[parseInt(t)];e&&(e.visible=!0)}},e.prototype.touchTapImgEvent=function(t){var e=this.ImgSelectedList.indexOf(t.currentTarget);if(e>-1){for(var i in this.ImgSelectedList){var n=this.ImgSelectedList[parseInt(i)];n&&parseInt(i)==e&&(n.visible=!1)}var s=new Object;s.chooseIndex=e.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","choose",s)}else Log.trace("ClickHideScene"," touchTapChooseRectEvent error  index error ")},e.prototype.onDestroy=function(){this.destroyEvent(),this.destroyData()},e.prototype.destroyData=function(){this.resetData(),delete this.ImgSelectedList,this.ImgSelectedList=[]},e.prototype.destroyEvent=function(){if(this.ImgSelectedList)for(var t=0,e=this.ImgSelectedList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapImgEvent,this)}this.btnReset&&this.btnReset.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapResetEvent,this)},e.prototype.touchTapResetEvent=function(t){this.resetData(),CommunicationManager.getInstance().makePostMessage("onFileMessage","reset","1")},e.prototype.execMessage=function(t){if(t.choose){var e=parseInt(t.choose.chooseIndex);this.revChooseHandle(e)}else t.reset&&this.resetData()},e.prototype.revChooseHandle=function(t){if(t>-1)for(var e in this.ImgSelectedList){var i=this.ImgSelectedList[parseInt(e)];i&&parseInt(e)==t&&(i.visible=!1)}},e}(UIObject);__reflect(ClickHideScene.prototype,"ClickHideScene");var DragAnyOptionalChooseBtn=function(t){function e(){var e=t.call(this)||this;return e.ImgList=[],e.rectListSelect=[],e.imgPosList=[],e.imgSelected=null,e.curMoveIndex=-1,e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){this.curMoveIndex=-1,this.imgPosList=[];for(var t in this.ImgList){var e=this.ImgList[parseInt(t)];e&&(this.imgPosList[parseInt(t)]=new egret.Point(e.x,e.y))}this.imgSelected&&(this.imgSelected.visible=!1)},e.prototype.initSelectData=function(t,e,i){t&&e&&null!=i?(this.rectListSelect=t,this.imgSelected=e,this.indexTrueAnswer=i):Log.trace("DragAnyOptionalChooseBtn","initSelectData error args is null")},e.prototype.initAddEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginEvent,this)}if(this.rectListSelect)for(var n=0,s=this.rectListSelect;n<s.length;n++){var i=s[n];i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapChooseRectEvent,this)}this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapResetEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.resetData=function(){for(var t in this.ImgList){var e=this.ImgList[parseInt(t)],i=this.imgPosList[parseInt(t)];e&&(e.x=i.x,e.y=i.y)}},e.prototype.touchTapResetEvent=function(t){this.resetData(),CommunicationManager.getInstance().makePostMessage("onFileMessage","reset","1")},e.prototype.touchTapChooseRectEvent=function(t){var e=this.rectListSelect.indexOf(t.currentTarget);if(e>-1){this.imgSelected&&(this.imgSelected.visible=!0,this.imgSelected.x=t.currentTarget.x,this.imgSelected.y=t.currentTarget.y),e==this.indexTrueAnswer?GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:1,movie:"success",movieCount:2}):GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:2,movie:"failed",movieCount:2});var i=new Object;i.chooseIndex=e.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","choose",i)}else Log.trace("DragAnyOptionalChooseBtn"," touchTapChooseRectEvent error  index error ")},e.prototype.touchBeginEvent=function(t){var e=this.ImgList.indexOf(t.currentTarget);if(e>=0){var i=this.group.numChildren;this.group.setChildIndex(t.target,i-1),this.curMoveIndex=e;var n=new Object;n.clickIndex=e.toString(),n.targetX=t.stageX.toString(),n.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin",n)}},e.prototype.touchMoveLayerEvent=function(t){if(this.curMoveIndex>=0){var e=this.ImgList[this.curMoveIndex];if(e){var i=t.stageX,n=t.stageY,s=this.globalToLocal(i,n);e.x=s.x,e.y=s.y;var o=new Object;o.clickIndex=this.curMoveIndex.toString(),o.targetX=e.x.toString(),o.targetY=e.y.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchMoveLayer",o)}}},e.prototype.touchEndLayerEvent=function(t){if(this.curMoveIndex>=0){var e=this.ImgList[this.curMoveIndex];if(e){var i=this.ImgList[this.curMoveIndex];if(i){var n=t.stageX,s=t.stageY,o=this.globalToLocal(n,s);i.x=o.x,i.y=o.y;var r=new Object;r.clickIndex=this.curMoveIndex.toString(),r.targetX=i.x.toString(),r.targetY=i.y.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchEndLayer",r)}this.curMoveIndex=-1}}},e.prototype.onDestroy=function(){this.destroyEvent(),this.destroyData()},e.prototype.destroyData=function(){this.resetData(),delete this.ImgList,this.ImgList=[],delete this.rectListSelect,this.rectListSelect=[],delete this.imgSelected,this.imgSelected=null,delete this.imgPosList,this.imgPosList=[]},e.prototype.destroyEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginEvent,this)}if(this.rectListSelect)for(var n=0,s=this.rectListSelect;n<s.length;n++){var i=s[n];i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapChooseRectEvent,this)}this.btnReset.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapResetEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.execMessage=function(t){if(t.reset)this.resetData();else if(t.choose){var e=parseInt(t.choose.chooseIndex);this.revChooseHandle(e)}else if(t.touchBegin){var i=parseInt(t.touchBegin.clickIndex),n=parseInt(t.touchBegin.targetX),s=parseInt(t.touchBegin.targetY);this.revStartHandle(i,n,s)}else if(t.touchMoveLayer){var i=parseInt(t.touchMoveLayer.clickIndex),n=parseInt(t.touchMoveLayer.targetX),s=parseInt(t.touchMoveLayer.targetY);this.revMoveLayerHandle(i,n,s)}else if(t.touchEndLayer){var i=parseInt(t.touchEndLayer.clickIndex),n=parseInt(t.touchEndLayer.targetX),s=parseInt(t.touchEndLayer.targetY);this.revEndLayerHandle(i,n,s)}},e.prototype.revChooseHandle=function(t){if(t>-1){var e=this.rectListSelect[t];this.imgSelected&&e&&(this.imgSelected.visible=!0,this.imgSelected.x=e.x,this.imgSelected.y=e.y),t==this.indexTrueAnswer?GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:1,movie:"success",movieCount:2}):GM.dlg.popDlg(CommonMovieDlg,"",null,{soundType:2,movie:"failed",movieCount:2})}},e.prototype.revStartHandle=function(t,e,i){var n=this.ImgList[t];if(n){var s=this.group.numChildren;this.group.setChildIndex(n,s-1)}else Log.trace("DragAnyOptionalChooseBtn","revStartHandle error target not find")},e.prototype.revMoveLayerHandle=function(t,e,i){var n=this.ImgList[t];n?(n.x=e,n.y=i):Log.trace("DragAnyOptionalChooseBtn","revMoveLayerHandle error target not find")},e.prototype.revEndLayerHandle=function(t,e,i){var n=this.ImgList[t];n?(n.x=e,n.y=i):Log.trace("DragAnyOptionalChooseBtn","revEndLayerHandle error target not find")},e}(UIObject);__reflect(DragAnyOptionalChooseBtn.prototype,"DragAnyOptionalChooseBtn");var DropAnyToRuleRectScene=function(t){function e(){var e=t.call(this)||this;return e.ImgList=[],e.ruleRectList=[],e.imgPosList=[],e.curMoveIndex=-1,e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){this.curMoveIndex=-1,this.imgPosList=[];for(var t=0;t<this.ImgList.length;t++){var e=this.ImgList[t];e&&this.imgPosList.push(new egret.Point(e.x,e.y))}},e.prototype.initAddEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginEvent,this)}for(var n=0,s=this.ruleRectList;n<s.length;n++){var o=s[n];o.touchEnabled=!1}this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.onDestroy=function(){this.resetImgPosForList(),this.destoryEvent(),this.destoryData()},e.prototype.resetImgPosForList=function(){for(var t in this.ImgList){var e=this.ImgList[t],i=this.imgPosList[t];e&&i&&(e.x=i.x,e.y=i.y)}},e.prototype.destoryData=function(){this.curMoveIndex=-1,delete this.ImgList,this.ImgList=[],delete this.ruleRectList,this.ruleRectList=[],delete this.imgPosList,this.imgPosList=[]},e.prototype.destoryEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginEvent,this)}for(var n=0,s=this.ruleRectList;n<s.length;n++){var o=s[n];o.touchEnabled=!1}this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.touchBeginEvent=function(t){var e=this.ImgList.indexOf(t.target);if(e>=0){var i=this.group.numChildren;this.group.setChildIndex(t.target,i-1),this.curMoveIndex=e}},e.prototype.touchMoveLayerEvent=function(t){if(this.curMoveIndex>=0){var e=this.ImgList[this.curMoveIndex];if(e){var i=t.stageX,n=t.stageY,s=this.globalToLocal(i,n);e.x=s.x-e.width/2,e.y=s.y-e.height/2;var o=new Object;o.name=this.curMoveIndex.toString(),o.targetX=e.x,o.targetY=e.y,CommunicationManager.getInstance().makePostMessage("onFileMessage","touchMove",o)}}},e.prototype.touchEndLayerEvent=function(t){var e="",i="true";if(this.curMoveIndex>=0){var n=this.ImgList[this.curMoveIndex];if(n){var s=t.stageX,o=t.stageY,r=this.getSiteIndexForGlobalPos(s,o);if(r>=0){var a=this.globalToLocal(s,o);n.x=a.x-n.width/2,n.y=a.y-n.height/2,e=this.curMoveIndex.toString(),i="false"}else{if(this.imgPosList[this.curMoveIndex]){var h=this.imgPosList[this.curMoveIndex];n.x=h.x,n.y=h.y}e=this.curMoveIndex.toString(),i="true"}}this.curMoveIndex=-1;var c=new Object;c.moveName=e,c.targetX=n.x,c.targetY=n.y,c.isResetStr=i,CommunicationManager.getInstance().makePostMessage("onFileMessage","touchEndLayer",c)}},e.prototype.getSiteIndexForGlobalPos=function(t,e){var i=this.globalToLocal(t,e),n=i.x,s=i.y;for(var o in this.ruleRectList){var r=this.ruleRectList[o];if(r&&r.hitTestPoint(n,s))return parseInt(o)}return-1},e.prototype.execMessage=function(t){if(t.touchMove){var e=t.touchMove.name,i=Number(t.touchMove.targetX),n=Number(t.touchMove.targetY);this.revMoveingHandle(e,i,n)}else if(t.touchEndLayer){var s=t.touchEndLayer.moveName,i=Number(t.touchEndLayer.targetX),n=Number(t.touchEndLayer.targetY),o=t.touchEndLayer.isResetStr;this.revMoveEndLayerHandle(s,o,i,n)}},e.prototype.revMoveingHandle=function(t,e,i){if(t&&t.length>0){if(this.ImgList[t]){var n=this.ImgList[t];if(n){n.x=e,n.y=i;var s=this.group.numChildren;this.group.setChildIndex(n,s-1)}else Log.trace("DropAnyToRuleRectScene","revMoveingHandle data error please check")}}else Log.trace("DropAnyToRuleRectScene","revMoveingHandle data error please check")},e.prototype.revMoveEndLayerHandle=function(t,e,i,n){var s=this.ImgList[t];if(s){var o=i,r=n;if("false"==e){var a=this.globalToLocal(o,r);s.x=a.x,s.y=a.y}else if(this.imgPosList[t]){var h=this.imgPosList[t];s.x=h.x,s.y=h.y}}else Log.trace("DropAnyToRuleRectScene","revMoveEndLayerHandle data error please check")},e}(UIObject);__reflect(DropAnyToRuleRectScene.prototype,"DropAnyToRuleRectScene");var DropToRuleRectScene=function(t){function e(){var e=t.call(this)||this;return e.ImgList=[],e.ruleRectList=[],e.imgPosList=[],e.curMoveIndex=-1,e.objIndexToSiteIndexMap={},e.siteIndexToObjIndexMap={},e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){this.siteIndexToObjIndexMap={},this.objIndexToSiteIndexMap={},this.curMoveIndex=-1,this.imgPosList=[];for(var t=0;t<this.ImgList.length;t++){var e=this.ImgList[t];e&&this.imgPosList.push(new egret.Point(e.x,e.y)),this.objIndexToSiteIndexMap[t]=-1}for(var t=0;t<this.ruleRectList.length;t++)this.siteIndexToObjIndexMap[t]=-1},e.prototype.initAddEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginEvent,this)}for(var n=0,s=this.ruleRectList;n<s.length;n++){var o=s[n];o.touchEnabled=!1}this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.onDestroy=function(){this.resetImgPosForList(),this.destoryEvent(),this.destoryData()},e.prototype.resetImgPosForList=function(){for(var t in this.ImgList){var e=this.ImgList[t],i=this.imgPosList[t];e&&i&&(e.x=i.x,e.y=i.y)}},e.prototype.destoryData=function(){this.curMoveIndex=-1,delete this.siteIndexToObjIndexMap,this.siteIndexToObjIndexMap={},delete this.objIndexToSiteIndexMap,this.objIndexToSiteIndexMap={},delete this.ImgList,this.ImgList=[],delete this.ruleRectList,this.ruleRectList=[],delete this.imgPosList,this.imgPosList=[]},e.prototype.destoryEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginEvent,this)}for(var n=0,s=this.ruleRectList;n<s.length;n++){var o=s[n];o.touchEnabled=!1}this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.touchBeginEvent=function(t){var e=this.ImgList.indexOf(t.target);if(e>=0){var i=this.group.numChildren;this.group.setChildIndex(t.target,i-1),this.curMoveIndex=e}},e.prototype.touchMoveLayerEvent=function(t){if(this.curMoveIndex>=0){var e=this.ImgList[this.curMoveIndex];if(e){var i=t.stageX,n=t.stageY,s=this.globalToLocal(i,n);e.x=s.x-e.width/2,e.y=s.y-e.height/2;var o=new Object;o.name=this.curMoveIndex.toString(),o.targetX=e.x,o.targetY=e.y,CommunicationManager.getInstance().makePostMessage("onFileMessage","touchMove",o)}}},e.prototype.touchEndLayerEvent=function(t){var e="",i="";if(this.curMoveIndex>=0){var n=this.ImgList[this.curMoveIndex];if(n){var s=t.stageX,o=t.stageY,r=this.getSiteIndexForGlobalPos(s,o);if(r>=0){if(this.isCanSetForSiteIndex(r)){var a=this.objIndexToSiteIndexMap[this.curMoveIndex];a>=0&&(this.siteIndexToObjIndexMap[a]=-1),this.siteIndexToObjIndexMap[r]=this.curMoveIndex,this.objIndexToSiteIndexMap[this.curMoveIndex]=r,e=this.curMoveIndex.toString(),i=r.toString()}}else{var a=this.objIndexToSiteIndexMap[this.curMoveIndex];a>=0&&(this.siteIndexToObjIndexMap[a]=-1),this.objIndexToSiteIndexMap[this.curMoveIndex]=-1,e=this.curMoveIndex.toString(),i="-1"}}}this.curMoveIndex=-1,this.refreshView();var h=new Object;h.moveName=e,h.moveSite=i,CommunicationManager.getInstance().makePostMessage("onFileMessage","touchEndLayer",h)},e.prototype.isCanSetForSiteIndex=function(t){return null!=this.siteIndexToObjIndexMap[t]&&this.siteIndexToObjIndexMap[t]>=0?!1:!0},e.prototype.getSiteIndexForGlobalPos=function(t,e){var i=this.globalToLocal(t,e),n=i.x,s=i.y;for(var o in this.ruleRectList){var r=this.ruleRectList[o];if(r&&r.hitTestPoint(n,s))return parseInt(o)}return-1},e.prototype.refreshView=function(){for(var t in this.ImgList){var e=this.ImgList[t];if(e)if(null!=this.objIndexToSiteIndexMap[t]&&this.objIndexToSiteIndexMap[t]>=0){var i=this.objIndexToSiteIndexMap[t];if(this.ruleRectList[i]){var n=this.ruleRectList[i];e.x=n.x+n.width/2-e.width/2,e.y=n.y+n.height/2-e.height/2}}else if(this.imgPosList[t]){var s=this.imgPosList[t];e.x=s.x,e.y=s.y}}},e.prototype.execMessage=function(t){if(t.touchMove){var e=t.touchMove.name,i=Number(t.touchMove.targetX),n=Number(t.touchMove.targetY);this.revMoveingHandle(e,i,n)}else if(t.touchEndLayer){var s=t.touchEndLayer.moveName,o=t.touchEndLayer.moveSite;this.revMoveEndLayerHandle(s,o)}},e.prototype.revMoveingHandle=function(t,e,i){if(t&&t.length>0){var n=parseInt(t);if(null!=n&&this.ImgList[n]){var s=this.ImgList[n];if(s){s.x=e,s.y=i;var o=this.group.numChildren;this.group.setChildIndex(s,o-1)}else Log.trace("DropToRuleRectScene","revMoveingHandle data error please check")}}else Log.trace("DropToRuleRectScene","revMoveingHandle data error please check")},e.prototype.revMoveEndLayerHandle=function(t,e){if(t&&e&&e.length>0&&t.length>0){var i=parseInt(t),n=parseInt(e);if(n>=0){var s=this.objIndexToSiteIndexMap[i];s>=0&&(this.siteIndexToObjIndexMap[s]=-1),this.siteIndexToObjIndexMap[n]=i,this.objIndexToSiteIndexMap[i]=n}else{var s=this.objIndexToSiteIndexMap[i];s>=0&&(this.siteIndexToObjIndexMap[s]=-1),this.objIndexToSiteIndexMap[i]=-1}}else Log.trace("DropToRuleRectScene","revMoveEndHandle data error please check");this.refreshView()},e}(UIObject);__reflect(DropToRuleRectScene.prototype,"DropToRuleRectScene");var OnlyClickForBtnScene=function(t){function e(){var e=t.call(this)||this;return e.CurState=0,e.ImgList=[],e}return __extends(e,t),e.prototype.onAdd=function(){this.CurState=0,this.refreshStateView(),this.initAddEvent()},e.prototype.initAddEvent=function(){this.btnNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this)},e.prototype.touchTapEvent=function(t){this.CurState<this.ImgList.length&&this.CurState++,this.refreshStateView(),CommunicationManager.getInstance().makePostMessage("onFileMessage","next",1)},e.prototype.onDestroy=function(){delete this.ImgList,this.ImgList=[],this.btnNext.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this)},e.prototype.refreshStateView=function(){for(var t in this.ImgList){var e=parseInt(t),i=this.ImgList[e];i&&(this.CurState<=e?i.visible=!1:i.visible=!0)}},e.prototype.execMessage=function(t){t.next&&this.revNextLayerHandle()},e.prototype.revNextLayerHandle=function(){this.CurState++,this.refreshStateView()},e}(UIObject);__reflect(OnlyClickForBtnScene.prototype,"OnlyClickForBtnScene");var OnlyClickScene=function(t){function e(){var e=t.call(this)||this;return e.CurState=0,e.ImgList=[],e}return __extends(e,t),e.prototype.onAdd=function(){this.CurState=0,this.refreshStateView(),this.initAddEvent()},e.prototype.initAddEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this)},e.prototype.touchTapEvent=function(t){this.CurState<this.ImgList.length&&this.CurState++,this.refreshStateView(),CommunicationManager.getInstance().makePostMessage("onFileMessage","next",1)},e.prototype.onDestroy=function(){delete this.ImgList,this.ImgList=[],this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this)},e.prototype.refreshStateView=function(){for(var t in this.ImgList){var e=parseInt(t),i=this.ImgList[e];i&&(this.CurState<=e?i.visible=!1:i.visible=!0)}},e.prototype.execMessage=function(t){t.next&&this.revNextLayerHandle()},e.prototype.revNextLayerHandle=function(){this.CurState++,this.refreshStateView()},e}(UIObject);__reflect(OnlyClickScene.prototype,"OnlyClickScene");var OnlySelectedScene=function(t){function e(){var e=t.call(this)||this;return e._arr=new Array,e}return __extends(e,t),e.prototype.onDestroy=function(){for(var t=0;t<this._arr.length;t++)for(var e=0;e<this._arr[t].length;e++)this._arr[t][e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doSelectedTouchHandle,this);delete this._arr,this._arr=[]},e.prototype.initScene=function(t){if(t.length<=0)return void Log.trace("onlySelectedScene","image arr error!!!");this._arr=t;for(var e=1,i=0;i<this._arr.length;i++)for(var n=0;n<this._arr[i].length;n++)this._arr[i][n].alpha=0,this._arr[i][n].addEventListener(egret.TouchEvent.TOUCH_TAP,this.doSelectedTouchHandle,this),this._arr[i][n].name="image"+String(e)+String(n),e++},e.prototype.doSelectedTouchHandle=function(t){if(1==this._arr.length)for(var e=0;e<this._arr.length;e++)for(var i=0;i<this._arr[e].length;i++)this._arr[e][i]===t.currentTarget?(this._arr[e][i].alpha=1,CommunicationManager.getInstance().makePostMessage("onFileMessage","selected",this._arr[e][i].name)):this._arr[e][i].alpha=0;else for(var e=0;e<this._arr.length;e++)for(var i=0;i<this._arr[e].length;i++)if(this._arr[e][i]===t.currentTarget){this._arr[e][i].alpha=1,CommunicationManager.getInstance().makePostMessage("onFileMessage","selected",this._arr[e][i].name);for(var n=0;n<this._arr.length;n++)this._arr[n][i]!==this._arr[e][i]&&(this._arr[n][i].alpha=0);break}},e.prototype.execMessage=function(t){if(t.selected){var e=String(t.selected);if(1==this._arr.length)for(var i=0;i<this._arr.length;i++)for(var n=0;n<this._arr[i].length;n++)this._arr[i][n].name===e?this._arr[i][n].alpha=1:this._arr[i][n].alpha=0;else for(var i=0;i<this._arr.length;i++)for(var n=0;n<this._arr[i].length;n++)if(this._arr[i][n].name===e){this._arr[i][n].alpha=1;for(var s=0;s<this._arr.length;s++)this._arr[s][n]!==this._arr[i][n]&&(this._arr[s][n].alpha=0);break}}},e}(UIObject);__reflect(OnlySelectedScene.prototype,"OnlySelectedScene");var Moudle_Page12Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page12Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgLeftList.push(this.img_left_1),this.ImgLeftList.push(this.img_left_bg),this.ImgRightList.push(this.img_right_1),this.ImgRightList.push(this.img_right_bg),this.ImgHideList.push(this.img_left_1),this.ImgHideList.push(this.img_right_1),this.ImgShowList.push(this.img_target_1),this.ImgShowList.push(this.img_target_2),this.ImgShowList.push(this.img_target_3),this.ImgShowList.push(this.img_title),this.posLeftOff=new egret.Point(212,0),this.posRightOff=new egret.Point(-216,0),t.prototype.onAdd.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.key="Moudle_Page12Scene",e}(TweenToCenterScene);__reflect(Moudle_Page12Scene.prototype,"Moudle_Page12Scene");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var DragAnyMakeAndCancleComponent=function(t){function e(){var e=t.call(this)||this;return e.isNewItem=!1,e.ImgList=[],e.curMoveItemIndex=-2,e.curComponentIndex=0,e}return __extends(e,t),e.prototype.onAdd=function(){this.initData(),this.initAddEvent()},e.prototype.initData=function(){this.targetList=[]},e.prototype.initAddEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}this.btnReset&&this.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.touchBeginOriginalEvent=function(t){var e=this.ImgList.indexOf(t.target);if(e>=-1){this.curMoveItemIndex=e,this.isNewItem=!0,this.curMoveItemObj=this.newObjForTouchBegin(t.target,t.stageX,t.stageY);var i=new Object;i.isNewItem="1",i.curIndexStr=e.toString(),i.targetX=t.stageX.toString(),i.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin"+this.curComponentIndex.toString(),i)}},e.prototype.newObjForTouchBegin=function(t,e,i){var n=this.group.globalToLocal(e,i),s=t.source,o=new eui.Image(s);return o.anchorOffsetX=t.anchorOffsetX,o.anchorOffsetY=t.anchorOffsetY,o.rotation=t.rotation,o.x=n.x,o.y=n.y,this.group.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),o},e.prototype.deleteObj=function(t){t&&(t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginMakedItemEvent,this),this.group.removeChild(t))},e.prototype.touchBeginMakedItemEvent=function(t){var e=0;for(var i in this.targetList){var n=this.targetList[i];n==t.currentTarget&&(e=parseInt(i))}if(e>=-1){var s=this.group.numChildren;this.group.setChildIndex(t.target,s-1),this.curMoveItemIndex=e,this.isNewItem=!1,this.curMoveItemObj=t.target;var n=new Object;n.isNewItem="0",n.curIndexStr=e.toString(),n.targetX=t.stageX.toString(),n.targetY=t.stageY.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchBegin"+this.curComponentIndex.toString(),n)}},e.prototype.touchMoveLayerEvent=function(t){if(this.curMoveItemObj){var e=this.curMoveItemObj;if(e){var i=t.stageX,n=t.stageY,s=this.globalToLocal(i,n);e.x=s.x,e.y=s.y;var o=new Object;o.targetX=e.x.toString(),o.targetY=e.y.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchMove"+this.curComponentIndex.toString(),o)}}},e.prototype.touchEndLayerEvent=function(t){var e=0,i=0,n=0,s=0,o=-2;if(this.curMoveItemIndex>=-1&&this.curMoveItemObj){var r=(this.curMoveItemObj,t.stageX),a=t.stageY;n=t.stageX,s=t.stageY,this.curMoveItemObj.x=r,this.curMoveItemObj.y=a;var h=this.rectCanSet.hitTestPoint(r,a);if(h)e=0,this.isNewItem?(i=1,this.targetList.push(this.curMoveItemObj),this.curMoveItemObj=null):(i=0,this.curMoveItemObj=null);else if(e=1,this.isNewItem)i=1,this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else{i=0;var c=0;for(var g in this.targetList){var u=this.targetList[g];u==this.curMoveItemObj&&(c=parseInt(g))}o=c,this.targetList.splice(c,1),this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null}}var l=new Object;l.isCancelStr=e.toString(),l.isNewItemStr=i.toString(),l.targetX=n.toString(),l.targetY=s.toString(),l.deleteIndex=o.toString(),CommunicationManager.getInstance().makePostMessage("onFileMessage","touchEndLayer"+this.curComponentIndex.toString(),l)},e.prototype.resetData=function(){if(this.targetList&&this.targetList.length>0){for(var t=0,e=this.targetList;t<e.length;t++){var i=e[t];this.deleteObj(i)}this.targetList=[]}},e.prototype.touchTapEvent=function(t){this.resetData(),CommunicationManager.getInstance().makePostMessage("onFileMessage","reset"+this.curComponentIndex.toString(),1)},e.prototype.onDestroy=function(){this.destoryEvent(),this.destoryData()},e.prototype.destoryData=function(){delete this.ImgList,this.ImgList=[],this.resetData()},e.prototype.destoryEvent=function(){for(var t=0,e=this.ImgList;t<e.length;t++){var i=e[t];i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginOriginalEvent,this)}this.btnReset&&this.btnReset.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.execMessage=function(t){if(t["reset"+this.curComponentIndex.toString()])this.resetData();else if(t["touchBegin"+this.curComponentIndex.toString()]){var e=t["touchBegin"+this.curComponentIndex.toString()],i=e.isNewItem,n=e.curIndexStr,s=parseInt(e.targetX),o=parseInt(e.targetY);this.revStartHandle(i,n,s,o)}else if(t["touchMove"+this.curComponentIndex.toString()]){var e=t["touchMove"+this.curComponentIndex.toString()],s=parseInt(e.targetX),o=parseInt(e.targetY);this.revMoveHandle(s,o)}else if(t["touchEndLayer"+this.curComponentIndex.toString()]){var e=t["touchEndLayer"+this.curComponentIndex.toString()],r=e.isCancelStr,a=e.isNewItemStr,s=parseInt(e.targetX),o=parseInt(e.targetY),h=parseInt(e.deleteIndex);this.revEndHandle(r,a,s,o,h)}},e.prototype.revStartHandle=function(t,e,i,n){if("1"==t){var s=parseInt(e),o=this.ImgList[s];
o?this.curMoveItemObj=this.newObjForTouchBegin(o,i,n):Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 1")}else{var s=parseInt(e),o=this.targetList[s];if(o){var r=this.group.numChildren;this.group.setChildIndex(o,r-1),this.curMoveItemObj=o}else Log.trace("DragAnyMakeForMaxAndCancleScene","revStartHandle error  index to obj not find isNewItemStr = 0")}},e.prototype.revMoveHandle=function(t,e){var i=this.curMoveItemObj;if(i){var n=this.globalToLocal(t,e);i.x=n.x,i.y=n.y}},e.prototype.revEndHandle=function(t,e,i,n,s){if("1"==t)if("1"==e)this.curMoveItemObj&&this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null;else if(s>=-1){var o=s;this.targetList.splice(o,1),this.curMoveItemObj&&this.deleteObj(this.curMoveItemObj),this.curMoveItemObj=null}else Log.trace("DragAnyMakeForMaxAndCancleScene","revEndHandle error  index to obj not find ");else"1"==e?(this.curMoveItemObj&&this.targetList.push(this.curMoveItemObj),this.curMoveItemObj=null):this.curMoveItemObj=null},e}(eui.Component);__reflect(DragAnyMakeAndCancleComponent.prototype,"DragAnyMakeAndCancleComponent");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var BalanceComponent=function(){function t(){this.rotMax=30,this.numWeightRotMax=30}return t.prototype.initData=function(){this.imgListLeft=[],this.imgListRight=[],this.imgListBalanceLine=[],this.numWeightLeftInit=0,this.numWeightRightInit=0,this.numWeightLeftCur=0,this.numWeightRightCur=0,this.rotMax=30,this.numWeightRotMax=30,this.pointCenter=new egret.Point(0,0)},t.prototype.onInit=function(){this.startRotTween(0,0,!0)},t.prototype.onDestroy=function(){},t.prototype.setLeftItemObjList=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null)},t.prototype.setRightItemObjList=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null)},t.prototype.startRotTween=function(t,e,i){void 0===i&&(i=!1);var n=!1;if(t==this.numWeightLeftCur&&e==this.numWeightRightCur&&(n=!0),this.numWeightLeftCur+this.numWeightLeftInit-this.numWeightRightCur-this.numWeightRightInit>=this.numWeightRotMax&&t+this.numWeightLeftInit-e-this.numWeightRightInit>=this.numWeightRotMax&&(n=!0),this.numWeightRightCur+this.numWeightRightInit-this.numWeightLeftCur-this.numWeightLeftInit>=this.numWeightRotMax&&e+this.numWeightRightInit-t-this.numWeightLeftInit>=this.numWeightRotMax&&(n=!0),n&&!i)return this.setLeftItemObjList(),void this.setRightItemObjList();this.numWeightLeftCur=t,this.numWeightRightCur=e;var s=200;i&&(s=0);var o=0;if(this.numWeightLeftCur+this.numWeightLeftInit==this.numWeightRightCur+this.numWeightRightInit)o=0;else if(this.numWeightLeftCur+this.numWeightLeftInit==0)o=this.rotMax;else if(this.numWeightRightCur+this.numWeightRightInit==0)o=-this.rotMax;else{var r=(-this.numWeightLeftCur-this.numWeightLeftInit+this.numWeightRightCur+this.numWeightRightInit)/this.numWeightRotMax;-1>r&&(r=-1),r>1&&(r=1),o=this.rotMax*r}for(var a=0,h=this.imgListBalanceLine;a<h.length;a++){var c=h[a];egret.Tween.removeTweens(c),egret.Tween.get(c).to({rotation:o},s)}for(var g=null,u=null,l=0,v=this.imgListLeft;l<v.length;l++){var c=v[l],p=egret.Point.distance(this.pointCenter,new egret.Point(c.x,c.y)),d=this.pointCenter.x-Math.cos(o*Math.PI/180)*p,m=this.pointCenter.y-Math.sin(o*Math.PI/180)*p;egret.Tween.removeTweens(c),egret.Tween.get(c).to({x:d,y:m},s),null==g&&(g=d),null==u&&(u=m)}for(var f=null,I=null,M=0,L=this.imgListRight;M<L.length;M++){var c=L[M],p=egret.Point.distance(this.pointCenter,new egret.Point(c.x,c.y)),y=this.pointCenter.x+Math.cos(o*Math.PI/180)*p,_=this.pointCenter.y+Math.sin(o*Math.PI/180)*p;egret.Tween.removeTweens(c),egret.Tween.get(c).to({x:y,y:_},s),null==f&&(f=y),null==I&&(I=_)}this.setLeftItemObjList(s,g,u),this.setRightItemObjList(s,f,I)},t}();__reflect(BalanceComponent.prototype,"BalanceComponent");var Moudle_Page10Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page10Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),this.ImgList.push(this.img_2),this.ImgList.push(this.img_3),this.ImgList.push(this.img_4),this.ImgList.push(this.img_5),this.ImgList.push(this.img_6),this.ImgList.push(this.img_7),this.ImgList.push(this.img_8),this.ImgList.push(this.img_9),this.ImgList.push(this.img_10),this.ImgList.push(this.img_11);for(var e=0,i=this.ImgList;e<i.length;e++){var n=i[e];n.pixelHitTest=!0}this.ruleRectList.push(this.rect_1),t.prototype.onAdd.call(this),this.initSelfData()},e.prototype.initSelfData=function(){this.img_Door1.visible=!0,this.group.setChildIndex(this.img_Door1,this.group.numChildren-1),this.img_Door2.visible=!1,this.img_Door1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapClickEvent,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.img_Door1.visible=!0,this.img_Door2.visible=!1,this.img_Door1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapClickEvent,this)},e.prototype.touchTapClickEvent=function(t){this.img_Door1.visible=!1,this.img_Door2.visible=!0,CommunicationManager.getInstance().makePostMessage("onFileMessage","click","1")},e.prototype.execMessage=function(e){t.prototype.execMessage.call(this,e),e.click&&(this.img_Door1.visible=!1,this.img_Door2.visible=!0)},e.key="Moudle_Page10Scene",e}(DropAnyToRuleRectScene);__reflect(Moudle_Page10Scene.prototype,"Moudle_Page10Scene");var Moudle_Page11Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page11Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),this.ImgList.push(this.img_2),this.ImgList.push(this.img_3),this.ImgList.push(this.img_4),this.ruleRectList.push(this.rect_1),this.ruleRectList.push(this.rect_2),this.ruleRectList.push(this.rect_3),this.ruleRectList.push(this.rect_4),t.prototype.onAdd.call(this)},e.key="Moudle_Page11Scene",e}(DropToRuleRectScene);__reflect(Moudle_Page11Scene.prototype,"Moudle_Page11Scene");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){},egret.ImageLoader.crossOrigin="anonymous",RES.setMaxLoadingThread(8);var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),GM.init(),this.stage.addEventListener(egret.Event.ACTIVATE,this.onActivate,this),this.stage.addEventListener(egret.Event.DEACTIVATE,this.onDeactivate,this),this.addChild(GameLayerManager.gameLayer()),this.runGame()["catch"](function(t){Log.trace("msg",t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),[4,RES.loadConfig("resource/gamemain/default.res.json","/resource")];case 1:return e.sent(),[4,RES.loadConfig("resource/Common_Moudle/Common_Moudle.res.json","/resource")];case 2:return e.sent(),[4,this.loadTheme()];case 3:return e.sent(),[4,this.loadCoursewareTheme()];case 4:return e.sent(),ResLoad.getInstance().LoadRes("preload",new Handler(this,this.onResourceLoadComplete)),[3,6];case 5:return t=e.sent(),console.error(t),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/gamemain/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadCoursewareTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/Common_Moudle/Common_Moudle.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){CommunicationManager.getInstance().makePostMessage("onPagenum","totalPages",17);var t=15/13;CommunicationManager.getInstance().makePostMessage("onLoadComplete","coursewareRatio",t)},e.prototype.onResourceLoadComplete=function(){this.createGameScene()},e.prototype.onActivate=function(t){Log.trace("msg","获得焦点")},e.prototype.onDeactivate=function(t){Log.trace("msg","失去焦点")},e}(eui.UILayer);__reflect(Main.prototype,"Main");var Moudle_Page13Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page13Scene_Skin",e._arr1=new Array,e._arr2=new Array,e._arrList=new Array,e}return __extends(e,t),e.prototype.onAdd=function(){this._arr1.push(this.img1),this._arr1.push(this.img3),this._arr1.push(this.img5),this._arr1.push(this.img7),this._arr1.push(this.img9),this._arr2.push(this.img2),this._arr2.push(this.img4),this._arr2.push(this.img6),this._arr2.push(this.img8),this._arr2.push(this.img10),this._arrList.push(this._arr1),this._arrList.push(this._arr2),t.prototype.initScene.call(this,this._arrList)},e.key="Moudle_Page13Scene",e}(OnlySelectedScene);__reflect(Moudle_Page13Scene.prototype,"Moudle_Page13Scene");var Moudle_Page14Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page14Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.initSelf(),this.ImgList.push(this.img_1),this.ImgList.push(this.img_2),this.ImgList.push(this.img_3),this.ImgList.push(this.img_4),this.ImgList.push(this.img_5),this.countImgList.push(1),this.countImgList.push(1),this.countImgList.push(1),this.countImgList.push(1),this.countImgList.push(1),this.rectCanSetList.push(this.rect_1),this.rectCanSetList.push(this.rect_2),t.prototype.onAdd.call(this)},e.prototype.onDestroy=function(){this.balanceComponent1.onDestroy(),delete this.balanceComponent1,this.balanceComponent1=null,this.balanceComponent2.onDestroy(),delete this.balanceComponent2,this.balanceComponent2=null,t.prototype.onDestroy.call(this)},e.prototype.isCanSetToRect=function(t,e,i,n){return this.isCanSetToRectForRectMax(e,i,3)},e.prototype.initSelf=function(){this.balanceComponent1=new BalanceComponent,this.balanceComponent1.initData(),this.balanceComponent1.imgListLeft.push(this.img_tp1_3),this.balanceComponent1.imgListLeft.push(this.img_tp1_5),this.balanceComponent1.imgListRight.push(this.img_tp1_4),this.balanceComponent1.imgListRight.push(this.rect_1),this.balanceComponent1.imgListBalanceLine.push(this.img_tp1_2),this.balanceComponent1.numWeightLeftInit=3,this.balanceComponent1.rotMax=12,this.balanceComponent1.numWeightRotMax=1,this.balanceComponent1.pointCenter=new egret.Point(this.img_tp1_2.x,this.img_tp1_2.y);var t=this;this.balanceComponent1.setRightItemObjList=function(e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),t.setRightItemObjList1(e,i,n)},this.balanceComponent1.onInit(),this.balanceComponent2=new BalanceComponent,this.balanceComponent2.initData(),this.balanceComponent2.imgListLeft.push(this.img_tp2_3),this.balanceComponent2.imgListLeft.push(this.img_tp2_5),this.balanceComponent2.imgListLeft.push(this.img_tp2_6),this.balanceComponent2.imgListLeft.push(this.img_tp2_7),this.balanceComponent2.imgListLeft.push(this.img_tp2_8),this.balanceComponent2.imgListLeft.push(this.img_tp2_9),this.balanceComponent2.imgListRight.push(this.img_tp2_4),this.balanceComponent2.imgListRight.push(this.rect_2),this.balanceComponent2.imgListBalanceLine.push(this.img_tp2_2),this.balanceComponent2.numWeightLeftInit=15,this.balanceComponent2.rotMax=12,this.balanceComponent2.numWeightRotMax=10,this.balanceComponent2.pointCenter=new egret.Point(this.img_tp2_2.x,this.img_tp2_2.y),this.balanceComponent2.setRightItemObjList=function(e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),t.setRightItemObjList2(e,i,n)},this.balanceComponent2.onInit()},e.prototype.setPosFunc=function(t,e,i){if(t)for(var n in t){var s=parseInt(n),o=t[s];egret.Tween.removeTweens(o.obj),o.obj.scaleX=.6,o.obj.scaleY=.6,0==s?(o.obj.x=e,o.obj.y=i-80):1==s?(o.obj.x=e+60,o.obj.y=i-80):2==s&&(o.obj.x=e-60,o.obj.y=i-80)}},e.prototype.startTweenToPosFunc=function(t,e,i,n){if(t)for(var s in t){var o=parseInt(s),r=t[o];if(egret.Tween.removeTweens(r.obj),0==o){var a=e,h=i-80;egret.Tween.get(r.obj).to({x:a,y:h},n)}else if(1==o){var a=e+60,h=i-80;egret.Tween.get(r.obj).to({x:a,y:h},n)}else if(2==o){var a=e-60,h=i-80;egret.Tween.get(r.obj).to({x:a,y:h},n)}}},e.prototype.setRightItemObjList1=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),null!=t&&null!=e&&null!=i?(this.setPosFunc(this.targetDataMap[0],this.img_tp1_4.x,this.img_tp1_4.y),this.startTweenToPosFunc(this.targetDataMap[0],e,i,t)):this.setPosFunc(this.targetDataMap[0],this.img_tp1_4.x,this.img_tp1_4.y)},e.prototype.setRightItemObjList2=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),null!=t&&null!=e&&null!=i?(this.setPosFunc(this.targetDataMap[1],this.img_tp2_4.x,this.img_tp2_4.y),this.startTweenToPosFunc(this.targetDataMap[1],e,i,t)):this.setPosFunc(this.targetDataMap[1],this.img_tp2_4.x,this.img_tp2_4.y)},e.prototype.refreshForListTouchEnd=function(){t.prototype.refreshForListTouchEnd.call(this);var e=function(t){var e=0;if(t)for(var i=0,n=t;i<n.length;i++){var s=n[i];0==s.index?e+=3:1==s.index?e+=6:2==s.index?e+=8:3==s.index?e+=10:4==s.index&&(e+=12)}return e},i=e(this.targetDataMap[0]);this.balanceComponent1.startRotTween(0,i);var n=e(this.targetDataMap[1]);this.balanceComponent2.startRotTween(0,n)},e.key="Moudle_Page14Scene",e}(DragAnyMakeRuleListCommonScene);__reflect(Moudle_Page14Scene.prototype,"Moudle_Page14Scene");var Moudle_Page15Scene=function(t){function e(){var e=t.call(this)||this;return e.leftView=null,e.rightView=null,e.skinName="Moudle_Page15Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.leftView=new DragAnyMakeAndCancleComponent,this.addChildAt(this.leftView,0),this.leftView.width=810,this.leftView.height=1349,this.leftView.x=0,this.leftView.y=0,this.leftView.group=this.group,this.leftView.rectCanSet=this.rect_left,this.leftView.btnReset=this.btnReset,this.leftView.curComponentIndex=1,this.leftView.ImgList.push(this.img_left1),this.leftView.ImgList.push(this.img_left2),this.leftView.ImgList.push(this.img_left3),this.leftView.onAdd(),this.rightView=new DragAnyMakeAndCancleComponent,this.addChildAt(this.rightView,0),this.rightView.width=810,this.rightView.height=1349,this.rightView.x=0,this.rightView.y=0,this.rightView.group=this.group,this.rightView.rectCanSet=this.rect_right,this.rightView.btnReset=this.btnReset,this.leftView.curComponentIndex=2,this.rightView.ImgList.push(this.img_right1),this.rightView.ImgList.push(this.img_right2),this.rightView.ImgList.push(this.img_right3),this.rightView.onAdd(),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.touchEndLayerEvent=function(t){this.leftView.touchEndLayerEvent(t),this.rightView.touchEndLayerEvent(t)},e.prototype.touchMoveLayerEvent=function(t){this.leftView.touchMoveLayerEvent(t),this.rightView.touchMoveLayerEvent(t)},e.prototype.onDestroy=function(){this.leftView.onDestroy(),this.removeChild(this.leftView),this.leftView=null,this.rightView.onDestroy(),this.removeChild(this.rightView),this.rightView=null,this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEndLayerEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveLayerEvent,this)},e.prototype.execMessage=function(t){this.leftView.execMessage(t),this.rightView.execMessage(t)},e.key="Moudle_Page15Scene",e}(UIObject);__reflect(Moudle_Page15Scene.prototype,"Moudle_Page15Scene");var Moudle_Page16Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page16Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.hourImg.rotation=0,this.secImg.rotation=0,this.clockImgArr.push(this.hourImg),this.clockImgArr.push(this.secImg),t.prototype.onAdd.call(this)},e.key="Moudle_Page16Scene",e}(ClockTouchScene);__reflect(Moudle_Page16Scene.prototype,"Moudle_Page16Scene");var Moudle_Page1Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page1Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),t.prototype.onAdd.call(this)},e.key="Moudle_Page1Scene",e}(OnlyClickScene);__reflect(Moudle_Page1Scene.prototype,"Moudle_Page1Scene");var Moudle_Page2Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page2Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),t.prototype.onAdd.call(this)},e.key="Moudle_Page2Scene",e}(OnlyClickForBtnScene);__reflect(Moudle_Page2Scene.prototype,"Moudle_Page2Scene");var Moudle_Page3Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page3Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgSelectedList.push(this.img_1),this.ImgSelectedList.push(this.img_2),this.ImgSelectedList.push(this.img_3),this.rectListSelect.push(this.rect_1),this.rectListSelect.push(this.rect_2),this.rectListSelect.push(this.rect_3),t.prototype.onAdd.call(this)},e.key="Moudle_Page3Scene",e}(ClickOneChooseScene);__reflect(Moudle_Page3Scene.prototype,"Moudle_Page3Scene");var Moudle_Page4Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page4Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgSelectedList.push(this.img_1),this.ImgSelectedList.push(this.img_2),this.ImgSelectedList.push(this.img_3),this.ImgSelectedList.push(this.img_4),this.ImgSelectedList.push(this.img_5),this.ImgSelectedList.push(this.img_6),this.ImgSelectedList.push(this.img_7),this.ImgSelectedList.push(this.img_8),this.ImgSelectedList.push(this.img_9),t.prototype.onAdd.call(this)},e.key="Moudle_Page4Scene",e}(ClickHideScene);__reflect(Moudle_Page4Scene.prototype,"Moudle_Page4Scene");var Moudle_Page5Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page5Scene_Skin",e.arr1=new Array,e.arr2=new Array,e}return __extends(e,t),e.prototype.onAdd=function(){this.clickItemArr.push(this.c1),this.clickItemArr.push(this.c2),this.arr1.push(this.sImg1),this.arr2.push(this.sImg2),this.showPhaseArr.push(this.arr1),this.showPhaseArr.push(this.arr2),t.prototype.initScene.call(this)},e.key="Moudle_Page5Scene",e}(ClickItemForShowPhaseScene);__reflect(Moudle_Page5Scene.prototype,"Moudle_Page5Scene");var Moudle_Page6Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page6Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),this.ImgList.push(this.img_2),this.ImgList.push(this.img_3),this.numMax=7,t.prototype.onAdd.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.key="Moudle_Page6Scene",e}(DragAnyMakeForMaxAndCancleScene);__reflect(Moudle_Page6Scene.prototype,"Moudle_Page6Scene");var Moudle_Page7Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page7Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),this.ImgList.push(this.img_2),this.ImgList.push(this.img_3);var e=[];e.push(this.rect_1),e.push(this.rect_2),e.push(this.rect_3),this.initSelectData(e,this.img_choose,1),t.prototype.onAdd.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.key="Moudle_Page7Scene",e}(DragAnyMakeOptionalChooseBtn);__reflect(Moudle_Page7Scene.prototype,"Moudle_Page7Scene");var Moudle_Page8Scene=function(t){function e(){var e=t.call(this)||this;return e.curIndexLineSelf=0,e.targetMap={},e.curListTarget={},e.targetPosMap={},e.skinName="Moudle_Page8Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),this.ImgList.push(this.img_2),this.ImgList.push(this.img_3),this.countImgList.push(1),this.countImgList.push(4),this.countImgList.push(6),this.rectCanSetList.push(this.rect_1),t.prototype.onAdd.call(this),this.curIndexLineSelf=0,this.targetMap._50_1_20_2_10_1="lable_t7_1",this.targetMap._50_1_20_1_10_3="lable_t7_2",this.targetMap._50_1_20_0_10_5="lable_t7_3",this.targetMap._50_0_20_4_10_2="lable_t7_4",this.targetMap._50_0_20_3_10_4="lable_t7_5",this.targetMap._50_0_20_2_10_6="lable_t7_6",this.targetPosMap={},this.targetPosMap[1]={x:954.22,y:313.91},this.targetPosMap[2]={x:954.22,y:435.5},this.targetPosMap[3]={x:954.22,y:563.3},this.targetPosMap[4]={x:954.22,y:689.15},this.targetPosMap[5]={x:954.22,y:810.7},this.targetPosMap[6]={x:954.22,y:936.03},this.curListTarget={},this.initLable(),this.btnNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapNextEvent,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.btnNext.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapNextEvent,this)},e.prototype.execMessage=function(e){t.prototype.execMessage.call(this,e),e.next&&(this.curIndexLineSelf++,this.resetData(),this.refreshForListTouchEnd())},e.prototype.touchTapNextEvent=function(t){this.curIndexLineSelf++,this.resetData(),this.refreshForListTouchEnd(),CommunicationManager.getInstance().makePostMessage("onFileMessage","next",1)},e.prototype.initLable=function(){for(var t=1;6>=t;t++){var e=this["lable_"+t+"_1"],i=this["lable_"+t+"_2"],n=this["lable_"+t+"_3"],s=this["lable_t7_"+t];e&&(e.visible=!1),i&&(i.visible=!1),n&&(n.visible=!1),s&&(s.visible=!1)}},e.prototype.refreshForListTouchEnd=function(){t.prototype.refreshForListTouchEnd.call(this),this.refreshViewList()},e.prototype.refreshViewList=function(){var t=this["lable_"+this.curIndexLineSelf+"_1"],e=this["lable_"+this.curIndexLineSelf+"_2"],i=this["lable_"+this.curIndexLineSelf+"_3"];if(t&&e&&i){var n="";if(t.text=this.curNumImgList[0].toString(),t.visible=!0,n+="_50_"+this.curNumImgList[0],e.text=this.curNumImgList[1].toString(),e.visible=!0,n+="_20_"+this.curNumImgList[1],i.text=this.curNumImgList[2].toString(),i.visible=!0,n+="_10_"+this.curNumImgList[2],this.targetMap[n]&&!this.curListTarget[n]){var s=this.targetMap[n];this.curListTarget[n]=this.curIndexLineSelf;var o=this[s];o&&(o.visible=!0,o.x=this.targetPosMap[this.curIndexLineSelf].x,o.y=this.targetPosMap[this.curIndexLineSelf].y)}}},e.key="Moudle_Page8Scene",e}(DragAnyMakeRuleListCommonScene);__reflect(Moudle_Page8Scene.prototype,"Moudle_Page8Scene");var Moudle_Page9Scene=function(t){function e(){var e=t.call(this)||this;return e.skinName="Moudle_Page9Scene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){this.ImgList.push(this.img_1),this.ImgList.push(this.img_2),this.ImgList.push(this.img_3);var e=[];e.push(this.rect_1),e.push(this.rect_2),e.push(this.rect_3),this.initSelectData(e,this.img_choose,1),t.prototype.onAdd.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.key="Moudle_Page9Scene",e}(DragAnyOptionalChooseBtn);__reflect(Moudle_Page9Scene.prototype,"Moudle_Page9Scene");var WaitPanel=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i.w=0,i.h=0,i.createView(),i}return __extends(e,t),e.prototype.destory=function(){EffectUtils.removeRotationEffect(this.imgRotatDragon)},e.prototype.createView=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,this.addMask(),this.spGroup=new egret.Sprite,this.spGroup.width=150,this.spGroup.height=150,this.addChild(this.spGroup),this.spGroup.x=this.w/2,this.spGroup.y=this.h/2,this.spGroup.anchorOffsetX=this.spGroup.width/2,this.spGroup.anchorOffsetY=this.spGroup.height/2,this.touchEnabled=!1,this.imgRotatDragon=new egret.Bitmap,this.imgRotatDragon.texture=RES.getRes("dolphin_png"),this.spGroup.addChild(this.imgRotatDragon),this.imgRotatDragon.x=this.spGroup.width/2,this.imgRotatDragon.y=this.spGroup.height/2,this.imgRotatDragon.anchorOffsetX=this.imgRotatDragon.width/2,this.imgRotatDragon.anchorOffsetY=this.imgRotatDragon.height/2,this.addGroupCont(this.imgBgBall,"bg_ball_png"),this.addGroupCont(this.imgFontLoading,"font_loading_png"),this.imgHand=new egret.Bitmap,this.imgHand.texture=RES.getRes("dolphin_arm_png"),this.spGroup.addChild(this.imgHand),this.imgHand.x=this.spGroup.width/2,this.imgHand.y=this.spGroup.height/2,this.imgHand.anchorOffsetX=this.imgHand.width/2,this.imgHand.anchorOffsetY=this.imgHand.height/2,EffectUtils.rotationEffect(this.imgHand,1e3),EffectUtils.rotationEffect(this.imgRotatDragon,1e3)},e.prototype.addMask=function(){this.bg=new egret.Sprite,this.bg.x=0,this.bg.y=0,this.bg.graphics.beginFill(0),this.bg.graphics.drawRect(0,0,this.w,this.h),this.bg.graphics.endFill(),this.addChild(this.bg),this.bg.alpha=0},e.prototype.addGroupCont=function(t,e){t=new egret.Bitmap,t.texture=RES.getRes(e),this.spGroup.addChild(t),t.x=this.spGroup.width/2,t.y=this.spGroup.height/2,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2},e}(egret.Sprite);__reflect(WaitPanel.prototype,"WaitPanel");var VersionManager=function(){function t(){}return t.courseware_name="courseware_二年级正课4月份第八讲周期问题下",t.VERSION="0.0.1",t}();__reflect(VersionManager.prototype,"VersionManager");var CommonMovieManager=function(){function t(){lcp.LListener.getInstance().addEventListener("show_commonmovie",this.showCommonMovie,this)}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.showCommonMovie=function(t){t&&t.param&&GM.dlg.popDlg(CommonMovieDlg,"",null,t.param)},t}();__reflect(CommonMovieManager.prototype,"CommonMovieManager");var CommunicationManager=function(){function t(){this.log="",lcp.LListener.getInstance().addEventListener("tky_topage",this.goPage,this),lcp.LListener.getInstance().addEventListener("tky_makepost",this.tkyMakePostAction,this)}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.addListener=function(t){window.addEventListener(t,GM.execMessage,!1)},t.prototype.goTargetPageHandle=function(t){if(0>=t)return void Log.trace("com","找不到指定页面");switch(t){case 2:GM.scene.runScene(Moudle_Page1Scene,"Moudle_page_scene1"),this.loadNextPage("Moudle_page_scene2");break;case 3:GM.scene.runScene(Moudle_Page2Scene,"Moudle_page_scene2"),this.loadNextPage("Moudle_page_scene3");break;case 4:GM.scene.runScene(Moudle_Page3Scene,"Moudle_page_scene3"),this.loadNextPage("Moudle_page_scene4");break;case 5:GM.scene.runScene(Moudle_Page4Scene,"Moudle_page_scene4"),this.loadNextPage("Moudle_page_scene5");break;case 6:GM.scene.runScene(Moudle_Page5Scene,"Moudle_page_scene5"),this.loadNextPage("Moudle_page_scene6");break;case 7:GM.scene.runScene(Moudle_Page6Scene,"Moudle_page_scene6"),this.loadNextPage("Moudle_page_scene7");break;case 8:GM.scene.runScene(Moudle_Page7Scene,"Moudle_page_scene7"),this.loadNextPage("Moudle_page_scene8");break;case 9:GM.scene.runScene(Moudle_Page8Scene,"Moudle_page_scene8"),this.loadNextPage("Moudle_page_scene9");break;case 10:GM.scene.runScene(Moudle_Page9Scene,"Moudle_page_scene9"),this.loadNextPage("Moudle_page_scene10");break;case 11:GM.scene.runScene(Moudle_Page10Scene,"Moudle_page_scene10"),this.loadNextPage("Moudle_page_scene11");break;case 12:GM.scene.runScene(Moudle_Page11Scene,"Moudle_page_scene11"),this.loadNextPage("Moudle_page_scene12");break;case 13:GM.scene.runScene(Moudle_Page12Scene,"Moudle_page_scene12"),this.loadNextPage("Moudle_page_scene13");break;case 14:GM.scene.runScene(Moudle_Page13Scene,"Moudle_page_scene13"),this.loadNextPage("Moudle_page_scene14");break;case 15:GM.scene.runScene(Moudle_Page14Scene,"Moudle_page_scene14"),this.loadNextPage("Moudle_page_scene15");break;case 16:GM.scene.runScene(Moudle_Page15Scene,"Moudle_page_scene15"),this.loadNextPage("Moudle_page_scene16");break;case 17:GM.scene.runScene(Moudle_Page16Scene,"Moudle_page_scene16");break;case 1:GM.scene.runScene(DolphinIsland,"dolphinIsland"),this.loadNextPage("Moudle_page_scene1")}Log.trace("com","已经跳往指定页面,page="+t)},t.prototype.makePostMessage=function(t,e,i){var n=new Object;n.method=t,n[e]=i,Log.trace("com","obj"),window.parent.postMessage(JSON.stringify(n),"*")},t.prototype.tkyMakePostAction=function(t){Log.trace("msg",t.param);var e=t.param;this.makePostMessage(e.method,e.keyName,e.value)},t.prototype.goPage=function(t){Log.trace("msg",t.param);var e=parseInt(t.param);this.goTargetPageHandle(e)},t.prototype.loadNextPage=function(t){ResLoad.getInstance().LoadRes(t)},t}();__reflect(CommunicationManager.prototype,"CommunicationManager");var WaitManager=function(){function t(){this.waitPanel=null,lcp.LListener.getInstance().addEventListener("show_wait",this.showWaritPanel,this),lcp.LListener.getInstance().addEventListener("hide_wait",this.hideWaritPanel,this)}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.showWaritPanel=function(){this.waitPanel||(this.waitPanel=new WaitPanel),GameLayerManager.gameLayer().maskLayer.removeChildren(),GameLayerManager.gameLayer().maskLayer.addChild(this.waitPanel)},t.prototype.hideWaritPanel=function(){this.waitPanel&&GameLayerManager.gameLayer().maskLayer.contains(this.waitPanel)&&GameLayerManager.gameLayer().maskLayer.removeChild(this.waitPanel)},t}();__reflect(WaitManager.prototype,"WaitManager");var ClassOverScene=function(t){function e(){var e=t.call(this)||this;return e.skinName="ClassOverScene_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){for(var t=0;11>=t;t++)this["img"+t].alpha=0,this["img"+t].visible=!1;egret.setTimeout(this.showScene,this,400)},e.prototype.onDestroy=function(){this.resetFun("img0",0,265.5),this.resetFun("img1",402.5,0),this.resetFun("img2",679.5,0),this.resetFun("img3",958.02,0),this.resetFun("img4",59,0),this.resetFun("img5",251,0),this.resetFun("img6",471,0),this.resetFun("img7",681,0),this.resetFun("img8",882,0),this.resetFun("img9",1086,0),this.resetFun("img10",1266,0),this.resetFun("img11",1467,0)},e.prototype.showScene=function(){egret.Tween.get(this.img0).to({x:165,alpha:1},300),egret.Tween.get(this.img1).to({y:448,alpha:1},350),egret.Tween.get(this.img2).to({y:448,alpha:1},400),egret.Tween.get(this.img3).to({y:448,alpha:1},450);for(var t=100,e=0;11>=e;e++){var i=new Object;i.name="img"+e,egret.setTimeout(this.doShowAction,this,t,i),t+=50}egret.Tween.get(this.img4).to({y:794,alpha:1},500),egret.Tween.get(this.img5).to({y:794,alpha:1},550),egret.Tween.get(this.img6).to({y:794,alpha:1},600),egret.Tween.get(this.img7).to({y:794,alpha:1},650),egret.Tween.get(this.img8).to({y:794,alpha:1},700),egret.Tween.get(this.img9).to({y:794,alpha:1},750),egret.Tween.get(this.img10).to({y:794,alpha:1},800),egret.Tween.get(this.img11).to({y:794,alpha:1},850)},e.prototype.doShowAction=function(t){var e=t.name;this[e].visible=!0},e.prototype.resetFun=function(t,e,i){this[t].x=e,this[t].y=i},e.key="ClassOverScene",e}(UIObject);__reflect(ClassOverScene.prototype,"ClassOverScene");var CommonMovieDlg=function(t){function e(){var e=t.call(this)||this;return e.skinName="Dlg_CommonMovie_Skin",e}return __extends(e,t),e.prototype.onAdd=function(){null!=this.data&&(this._movieName=this.data.movie,this._movieCount=this.data.movieCount,this._soundName=this.data.sound,this._soundType=Number(this.data.soundType),this.playAction())},e.prototype.onDestroy=function(){},e.prototype.playAction=function(){this.act=LN.getInstance().getMovieClip(this._movieName,this._movieCount),this.act.gotoAndPlay(-1),this.act.x=781-this.act.width/2,this.act.y=674-this.act.height/2,this.addChild(this.act),egret.Tween.get(this.act).to({alpha:1},1e3),this._soundName?GM.sound.playEffect(this._soundName):this.randomSoundEffect(this._soundType)
},e.prototype.overZmovieAct=function(t){var e=t.currentTarget;this.act&&(e.stop(),e.hasEventListener(egret.Event.SOUND_COMPLETE)&&e.removeEventListener(egret.Event.SOUND_COMPLETE,this.overZmovieAct,this));var i=function(){this.act.stop(),this.act.hasEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE)&&this.act.removeEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.overZmovieAct,this),this.contains(this.act)&&this.removeChild(this.act)};egret.Tween.get(this.act).to({alpha:0},1e3).call(i,this).call(this.closeFunc,this)},e.prototype.overAct=function(){var t=function(){this.act.stop(),this.act.hasEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE)&&this.act.removeEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.overZmovieAct,this),this.contains(this.act)&&this.removeChild(this.act)};egret.Tween.get(this.act).to({alpha:0},1e3).call(t,this).call(this.closeFunc,this)},e.prototype.randomSoundEffect=function(t){var e=1==t?App.RandomUtils.limitInteger(1,3):App.RandomUtils.limitInteger(1,2),i="";if(1==t)switch(e){case 1:i="effect_bingo_1_mp3";break;case 2:i="effect_bingo_2_mp3";break;case 3:i="effect_bingo_3_mp3"}else if(2==t)switch(e){case 1:i="effect_error_1_mp3";break;case 2:i="effect_error_2_mp3"}if(""==i)return void this.overAct();var n=RES.getRes(i);if(!n)return void this.overAct();var s=n.play(0,1);s.addEventListener(egret.Event.SOUND_COMPLETE,this.overZmovieAct,this)},e.prototype.closeFunc=function(){this.onDlgClose(e.key)},e.key="CommonMovieDlg",e}(UIObject);__reflect(CommonMovieDlg.prototype,"CommonMovieDlg");var DolphinIsland=function(t){function e(){var e=t.call(this)||this;return e.skinName="DolphinIsland_Skin",e.originArr=[495,230,1210,370,475,650,1395,760,739,1070],e.movedArr=[-554,351,1735,0,-98,1340,2240,762,900,1365],e}return __extends(e,t),e.prototype.onAdd=function(){this.initScene(),this.initAddEvent()},e.prototype.onDestroy=function(){egret.stopTick(this.onTicker,this);var t=this._onClick.getDisplay();this.dragonGroup.removeChild(t),this.img_bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchCloudMoveHandle,this)},e.prototype.initScene=function(){for(var t=1;5>=t;t++)this["pageImg"+t].x=this.originArr[2*(t-1)],this["pageImg"+t].y=this.originArr[2*(t-1)+1],this["pageImg"+t].touchEnabled=!1;if(this._onClick=DragonBoneManager.getInstance().getDBArmature("hand_anim","armatureName"),this._onClick){var e=this._onClick.getDisplay();this.dragonGroup.addChild(e),this._onClick.animation.play("hand2",0)}},e.prototype.initAddEvent=function(){egret.startTick(this.onTicker,this),this.img_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchCloudMoveHandle,this),this.dragonGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goNextSceneHandle,this)},e.prototype.goNextSceneHandle=function(){},e.prototype.execMessage=function(t){if(t.touchTap)this.picMovedFun();else if(t.goNextScene){var e=Number(t.goNextScene);CommunicationManager.getInstance().makePostMessage("onFileMessage","goNextScene",e)}},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},e.prototype.touchCloudMoveHandle=function(){CommunicationManager.getInstance().makePostMessage("onFileMessage","touchTap",1),this.picMovedFun()},e.prototype.picMovedFun=function(){for(var t=1;5>=t;t++)egret.Tween.get(this["pageImg"+t]).to({x:this.movedArr[2*(t-1)],y:this.movedArr[2*(t-1)+1]},1e3)},e.key="DolphinIsland",e}(UIObject);__reflect(DolphinIsland.prototype,"DolphinIsland");